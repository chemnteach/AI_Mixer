# The Mixer Configuration File

paths:
  library_cache: "./library_cache"
  mashup_output: "./mashups"
  chroma_db: "./chroma_db"
  failed_files: "./library_cache/failed"

audio:
  sample_rate: 44100
  bit_depth: 16
  channels: 2
  default_format: "wav"

models:
  whisper_size: "base"  # tiny | base | small | medium | large
  demucs_model: "htdemucs"  # mdx | htdemucs | htdemucs_ft
  embedding_model: "sentence-transformers/all-MiniLM-L6-v2"

llm:
  primary_provider: "anthropic"  # anthropic | openai
  fallback_provider: "openai"
  anthropic_model: "claude-3-5-sonnet-20241022"
  openai_model: "gpt-4-turbo-preview"
  max_retries: 3
  timeout: 30

curator:
  bpm_tolerance: 0.05  # Â±5%
  max_stretch_ratio: 1.2  # Don't stretch beyond 20%
  default_match_criteria: "hybrid"
  max_candidates: 5

  # Compatibility scoring weights (must sum to ~1.0)
  weight_bpm: 0.35      # BPM proximity importance
  weight_key: 0.30      # Key compatibility importance
  weight_energy: 0.20   # Energy alignment importance
  weight_genre: 0.15    # Genre similarity importance

  # Batch recommendations
  min_compatibility: 0.5  # Minimum score for pair recommendations
  max_pairs: 10           # Maximum pairs to return in batch mode

engineer:
  default_quality: "high"  # draft | high | broadcast
  vocal_attenuation_db: -2  # How much quieter vocals vs instrumental
  fade_duration_sec: 4.0
  normalize_lufs: -14  # Target loudness

performance:
  max_concurrent_downloads: 4
  enable_gpu: true
  fallback_to_cpu: true
  max_cache_size_gb: 50

logging:
  level: "INFO"  # DEBUG | INFO | WARNING | ERROR
  file: "mixer.log"
  max_file_size_mb: 100
  backup_count: 5

# Director Agent Configuration (Visual Intelligence)
director:
  default_theme: "sponsor_neon"
  default_format: "short"

  event_detection:
    drop_energy_threshold: 0.2
    section_change_min_delta: 0.15
    hard_start_threshold: 0.1

  camera:
    base_distance: 5.0
    base_shot: "medium"
    zoom_on_drop: true
    zoom_duration_sec: 2.0
    retention_nudge_interval_sec: 25
    retention_nudge_magnitude: 0.1

# Studio Configuration (Blender Integration)
studio:
  blender_executable: "blender"
  render_timeout_sec: 600
  fps: 30
  render_engine: "EEVEE"

  resolution:
    short: [1080, 1920]  # 9:16 for TikTok/Reels/Shorts
    long: [1920, 1080]   # 16:9 for YouTube

  quality:
    samples: 64
    shadow_quality: "medium"

# Encoder Configuration (FFmpeg Platform Variants)
encoder:
  default_video_codec: "libx264"
  default_audio_codec: "aac"
  quality_preset: "medium"
  parallel_encoding: true

  platforms:
    tiktok:
      resolution: [1080, 1920]
      video_bitrate: "5M"
      audio_bitrate: "192k"
      burn_captions: true
      fps: 30

    reels:
      resolution: [1080, 1920]
      video_bitrate: "5M"
      audio_bitrate: "192k"
      burn_captions: true
      fps: 30

    shorts:
      resolution: [1080, 1920]
      video_bitrate: "5M"
      audio_bitrate: "192k"
      burn_captions: true
      fps: 30

    youtube:
      resolution: [1920, 1080]
      video_bitrate: "8M"
      audio_bitrate: "320k"
      burn_captions: false
      fps: 30
